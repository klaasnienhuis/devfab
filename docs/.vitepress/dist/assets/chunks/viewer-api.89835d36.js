function A(o,f){for(var h=0;h<f.length;h++){const a=f[h];if(typeof a!="string"&&!Array.isArray(a)){for(const d in a)if(d!=="default"&&!(d in o)){const u=Object.getOwnPropertyDescriptor(a,d);u&&Object.defineProperty(o,d,u.get?u:{enumerable:!0,get:()=>a[d]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}var P=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function R(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var b={exports:{}};(function(o,f){(function(h,a){o.exports=a()})(P,()=>(()=>{var h={d:(e,t)=>{for(var i in t)h.o(t,i)&&!h.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},a={};function d(e){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(e)}h.d(a,{default:()=>E});var u=function(e,t){e.forEach(function(i){this[i]=function(){var n,s=t._requestIdCounter++,r=Array.prototype.slice.call(arguments);if(r.length>0){var c=r[r.length-1];typeof c=="function"&&(n=r.pop())}n&&(t._pendingRequests[s]=n.bind(this)),t._target.postMessage({type:"api.request",instanceId:t.getIdentifier(),requestId:s,member:i,arguments:r},t.getDomain())}},this),this.addEventListener=function(i,n,s){i==="viewerready"&&t.isViewerReady&&n(),t._eventListeners[i]||(t._eventListeners[i]=[]),t._eventListeners[i].push(n),s&&this.setListenerOptions&&(s.name=i,this.setListenerOptions(s))},this.removeEventListener=function(i,n){if(t._eventListeners[i]){var s=t._eventListeners[i].indexOf(n);s!==-1&&t._eventListeners[i].splice(s,1)}}},_=function(e,t,i){this._target=e,this._requestIdCounter=0,this._pendingRequests={},this._eventListeners={},this._ready=!1,this._domain=i,this._instanceId=t,this.listenServer()};_.prototype={getIdentifier:function(){return this._instanceId},getDomain:function(){return this._domain},setIdentifier:function(e){this._instanceId=e},use:function(e,t){this._version=e,this._ready=!0;var i=this._requestIdCounter++;this._pendingRequests[i]=(function(n,s,r){n?t.call(this,n):t.call(this,null,new u(r,this))}).bind(this),this._target.postMessage({type:"api.initialize",requestId:i,name:e,instanceId:this._instanceId},this._domain)},listenServer:function(){if(!this._serverReceiveMessageBinded){var e=["api.initialize.result","api.request.result","api.event"];this._serverReceiveMessageBinded=(function(t){if(t.origin===this._domain&&t.data&&t.data.type&&t.data.instanceId&&t.data.instanceId===this.getIdentifier()){var i=t.data.type;if(e.indexOf(i)!==-1)if(i==="api.event"){var n=t.data.results,s=n[0];if(this._eventListeners["*"]||this._eventListeners.all)return void["*","all"].forEach(function(p){var m=this._eventListeners[p];m&&m.forEach(function(y){y.apply(y,n)})},this);var r=n.slice(1),c=this._eventListeners[s];c?c.forEach(function(p){p.apply(p,r)}):s==="viewerready"&&(this.isViewerReady=!0)}else{var l=t.data.requestId,g=this._pendingRequests[l];if(!g)return;g.apply(null,t.data.results),this._pendingRequests[l]=void 0}}}).bind(this),window.addEventListener("message",this._serverReceiveMessageBinded)}}};const I=_;var O=/[&|;]+/g;function L(e){return d(e)==="object"?(t=e,i={},Object.keys(t).forEach(function(n){i[n]=Array.isArray(t[n])?t[n]:[t[n]]}),i):(e[0]==="?"&&(e=e.substr(1)),e.split(O).reduce(function(n,s){if(s.length===0)return n;var r=s.indexOf("=");r===-1&&(r=s.length);var c=decodeURIComponent(s.substr(0,r).replace(/\+/g,"%20")),l=decodeURIComponent(s.substr(r+1).replace(/\+/g,"%20"));return n[c]===void 0&&(n[c]=[]),n[c].push(l),n},{}));var t,i}window.SketchfabAPIClient=I;var v=function(e,t){var i=e,n=t;d(e)==="object"&&(n=e,i=null),this._version=i,this._target=n,window.sketchfabAPIinstances||(window.sketchfabAPIinstances=[]),window.sketchfabAPIinstances.push(this),this._apiId=window.sketchfabAPIinstances.length.toString(),this._target.id&&(this._apiId+="_"+this._target.id),this._target.allow||(this._target.allow="vr; autoplay; fullscreen"),this._client=void 0,this._options=void 0,this._domain="sketchfab.com",this._domain=this._domain==="same-as-current"?window.location.hostname:this._domain,this._urlTemplate="https://YYYY/models/XXXX/embed",this._url=this._urlTemplate.replace("YYYY",this._domain),this._transmitOptions={},this._getURLOptions()};v.prototype={_urlOptionsDict:{skfb_api_version:{default:"1.12.1",type:"string"}},_optionsLoaded:function(e){this._urlOptions=e,this._version=this._getURLOption("skfb_api_version",this._version)},_getURLOption:function(e,t){var i=this._urlOptionsDict[e];if(!i)return t;t==null&&(t=i.default);var n=this._urlOptions[e];return n&&n.length?n[0]:t},_getURLOptions:function(){if(!window||!window.location.search)return this._optionsLoaded({});var e=L(window.location.search);for(var t in e)t.startsWith("skfb_")&&(this._transmitOptions[t.substr(5)]=e[t]);return this._optionsLoaded(e)},getEmbedURL:function(e,t){var i=this._url+"?api_version="+this._version+"&api_id="+this._apiId;t&&Object.keys(t).forEach(function(s){t[s]!=null&&typeof t[s]!="function"&&(i+="&"+s.toString()+"="+t[s].toString())});var n=this._transmitOptions;return Object.keys(this._transmitOptions).forEach(function(s){i+="&"+s.toString()+"="+n[s].toString()}),i.replace("XXXX",e)},init:function(e,t){this._options=t,this._uid=e,this._realInit()},_initializeAPIEmbed:function(e){if(e.data&&e.data.instanceId&&this._apiId===e.data.instanceId&&e.data.type==="api.ready"&&this._target.src){if(e.data.error!==void 0)return this.error(e.data.error),void window.removeEventListener("message",this._initializeAPIEmbedBinded);var t=this._target.src.split("/");t="https://"+t[2],this._client&&(console.log("reusing a Sketchfab instance for multiple client is not supported, please create a new sketchfab instance"),window.removeEventListener("message",this._client._serverReceiveMessageBinded)),this._client=new window.SketchfabAPIClient(this._target.contentWindow,this._apiId,t),this._client.use(this._version,(function(i,n){if(i)throw i;this.success.call(this,n)}).bind(this)),window.removeEventListener("message",this._initializeAPIEmbedBinded)}},_realInit:function(){this._initializeAPIEmbedBinded||(this._initializeAPIEmbedBinded=this._initializeAPIEmbed.bind(this)),window.addEventListener("message",this._initializeAPIEmbedBinded),this._target.src=this.getEmbedURL(this._uid,this._options)},success:function(e){this._options.success&&typeof this._options.success=="function"&&this._options.success(e)},error:function(e){this._options.error&&typeof this._options.error=="function"&&this._options.error(e)},show:function(){var e=this._target.style.top;this._target.style.top="-1000vh",Promise.resolve().then((function(){this._target.style.top=e}).bind(this))}};const E=v;return a.default})())})(b);var w=b.exports;const S=R(w),k=A({__proto__:null,default:S},[w]);export{k as v};
